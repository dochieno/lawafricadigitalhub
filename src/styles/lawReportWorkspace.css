/* =======================================================
   FILE: src/styles/lawReportWorkspace.css
   Purpose: Premium "Case Workspace" (Westlaw + Notion + Linear vibe)
   Fixes:
   - Drawer gets a real scroll container (.lrwDrawerBody).
   - Chat tab becomes flex-based so messages scroll and composer stays reachable.
   - Slight top header polish (spacing + better wrap behavior).
   ======================================================= */

/* -----------------------------
   Tokens
------------------------------ */
:root {
  --la-maroon: #6b233b;
  --la-maroon-2: #7a2b47;
  --la-maroon-deep: #4a1527;

  --ink: #0f172a;
  --muted: rgba(15, 23, 42, 0.62);
  --muted-2: rgba(15, 23, 42, 0.48);

  --bg: #f6f7fb;
  --surface: rgba(255, 255, 255, 0.85);
  --surface-2: rgba(255, 255, 255, 0.72);

  --border: rgba(15, 23, 42, 0.10);
  --border-2: rgba(15, 23, 42, 0.14);

  --shadow: 0 18px 50px rgba(17, 24, 39, 0.12);
  --shadow-2: 0 10px 25px rgba(17, 24, 39, 0.10);
  --shadow-soft: 0 8px 18px rgba(17, 24, 39, 0.08);

  --radius-xl: 22px;
  --radius-lg: 18px;
  --radius-md: 14px;
  --radius-sm: 12px;

  --ring: 0 0 0 4px rgba(107, 35, 59, 0.16);
  --ring-soft: 0 0 0 3px rgba(107, 35, 59, 0.12);

  --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

  --sans: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  --serif: ui-serif, Georgia, "Times New Roman", Times, serif;
}

/* -----------------------------
   Page wrapper + themes
------------------------------ */
.lrwWrap {
  min-height: 100vh;
  background:
    radial-gradient(1200px 700px at 20% 0%, rgba(107, 35, 59, 0.08), transparent 55%),
    radial-gradient(1000px 700px at 95% 10%, rgba(107, 35, 59, 0.06), transparent 55%),
    linear-gradient(180deg, #f7f7fb, #f4f5fa);
  color: var(--ink);
  font-family: var(--sans);
}

.lrwWrap[data-theme="paper"] {
  --paper-bg: rgba(255, 255, 255, 0.86);
  --paper-ink: var(--ink);
  --paper-muted: rgba(15, 23, 42, 0.58);
  --paper-border: rgba(15, 23, 42, 0.10);
}

.lrwWrap[data-theme="sepia"] {
  --paper-bg: rgba(255, 250, 238, 0.86);
  --paper-ink: #1b1b1b;
  --paper-muted: rgba(27, 27, 27, 0.55);
  --paper-border: rgba(27, 27, 27, 0.12);
}

.lrwWrap[data-theme="dark"] {
  background:
    radial-gradient(1000px 700px at 10% 0%, rgba(107, 35, 59, 0.22), transparent 55%),
    radial-gradient(1200px 700px at 95% 10%, rgba(107, 35, 59, 0.18), transparent 55%),
    linear-gradient(180deg, #0b1020, #0b1020);
  --paper-bg: rgba(14, 18, 32, 0.86);
  --paper-ink: rgba(255, 255, 255, 0.90);
  --paper-muted: rgba(255, 255, 255, 0.55);
  --paper-border: rgba(255, 255, 255, 0.10);

  color: rgba(255, 255, 255, 0.90);
}

/* Utilities */
.lrwLoading,
.lrwDocEmpty,
.lrwEmptyState {
  max-width: 980px;
  margin: 40px auto;
  padding: 18px 18px;
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  background: var(--surface);
  box-shadow: var(--shadow-soft);
}

.lrwEmptyState .t {
  font-size: 18px;
  font-weight: 800;
  letter-spacing: -0.02em;
}
.lrwEmptyState .s {
  margin-top: 6px;
  color: var(--muted);
  font-size: 13px;
}
.lrwEmptyState .a {
  margin-top: 14px;
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

/* -----------------------------
   Top bar (slight polish)
------------------------------ */
.lrwTop {
  position: sticky;
  top: 0;
  z-index: 30;
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
  border-bottom: 1px solid var(--border);
  background: rgba(255, 255, 255, 0.62);
}

.lrwWrap[data-theme="dark"] .lrwTop {
  background: rgba(14, 18, 32, 0.58);
  border-bottom-color: var(--paper-border);
}

.lrwTopInner {
  max-width: 1400px;
  margin: 0 auto;
  padding: 12px 16px; /* slightly tighter */
  display: flex;
  align-items: center;
  gap: 12px;
}

.lrwTopInnerCompact {
  align-items: center;
}

.lrwTitleBlock {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.lrwTitle {
  font-size: 16px;
  font-weight: 850;
  letter-spacing: -0.018em;
  color: var(--ink);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.lrwWrap[data-theme="dark"] .lrwTitle {
  color: rgba(255, 255, 255, 0.92);
}

.lrwMetaRow {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.lrwPill {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  font-size: 12px;
  padding: 7px 10px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: rgba(255, 255, 255, 0.72);
  color: rgba(15, 23, 42, 0.70);
}

.lrwWrap[data-theme="dark"] .lrwPill {
  background: rgba(255, 255, 255, 0.06);
  border-color: rgba(255, 255, 255, 0.10);
  color: rgba(255, 255, 255, 0.72);
}

.lrwPill.soft {
  background: rgba(107, 35, 59, 0.07);
  border-color: rgba(107, 35, 59, 0.18);
  color: rgba(107, 35, 59, 0.92);
}

.lrwWrap[data-theme="dark"] .lrwPill.soft {
  background: rgba(107, 35, 59, 0.24);
  border-color: rgba(107, 35, 59, 0.30);
  color: rgba(255, 255, 255, 0.88);
}

.lrwTopActions {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
  justify-content: flex-end;
}

.lrwTopErr {
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 16px 12px;
  color: #b91c1c;
  font-size: 13px;
}

/* -----------------------------
   Buttons
------------------------------ */
.lrwBtn,
.lrwIconBtn,
.lrwMiniBtn,
.segBtn,
.tab,
.lrwSuggest,
.mini {
  font-family: var(--sans);
}

.lrwBtn {
  appearance: none;
  border: 1px solid var(--border);
  background: rgba(255, 255, 255, 0.78);
  color: rgba(15, 23, 42, 0.88);
  padding: 10px 12px;
  border-radius: 14px;
  font-size: 13px;
  font-weight: 650;
  letter-spacing: -0.01em;
  cursor: pointer;
  transition: transform 120ms ease, box-shadow 120ms ease, border-color 120ms ease, background 120ms ease, opacity 120ms ease;
  box-shadow: 0 1px 0 rgba(17, 24, 39, 0.02);
}

.lrwWrap[data-theme="dark"] .lrwBtn {
  background: rgba(255, 255, 255, 0.06);
  border-color: rgba(255, 255, 255, 0.12);
  color: rgba(255, 255, 255, 0.86);
}

.lrwBtn:hover {
  transform: translateY(-1px);
  box-shadow: var(--shadow-soft);
  border-color: var(--border-2);
}

.lrwBtn:active {
  transform: translateY(0);
  box-shadow: none;
}

.lrwBtn:focus-visible {
  outline: none;
  box-shadow: var(--ring);
  border-color: rgba(107, 35, 59, 0.28);
}

.lrwBtn.primary {
  border-color: rgba(107, 35, 59, 0.22);
  background: linear-gradient(135deg, rgba(107, 35, 59, 0.98), rgba(122, 43, 71, 0.96));
  color: #fff;
  box-shadow: 0 10px 22px rgba(107, 35, 59, 0.18);
}

.lrwBtn.primary:hover {
  box-shadow: 0 14px 30px rgba(107, 35, 59, 0.22);
  border-color: rgba(107, 35, 59, 0.28);
}

.lrwBtn.ghost {
  background: rgba(255, 255, 255, 0.55);
}
.lrwWrap[data-theme="dark"] .lrwBtn.ghost {
  background: rgba(255, 255, 255, 0.05);
}

.lrwBtn.isBusy,
.lrwBtn:disabled,
.lrwIconBtn:disabled,
.lrwMiniBtn:disabled,
.tab:disabled,
.segBtn:disabled {
  cursor: not-allowed;
  opacity: 0.62;
  transform: none !important;
  box-shadow: none !important;
}

.lrwIconBtn {
  appearance: none;
  border: 1px solid var(--border);
  background: rgba(255, 255, 255, 0.70);
  color: rgba(15, 23, 42, 0.88);
  padding: 10px 12px;
  border-radius: 14px;
  font-size: 13px;
  font-weight: 650;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: 10px;
  transition: transform 120ms ease, box-shadow 120ms ease, border-color 120ms ease, background 120ms ease, opacity 120ms ease;
}

.lrwWrap[data-theme="dark"] .lrwIconBtn {
  background: rgba(255, 255, 255, 0.06);
  border-color: rgba(255, 255, 255, 0.12);
  color: rgba(255, 255, 255, 0.86);
}

.lrwIconBtn:hover {
  transform: translateY(-1px);
  box-shadow: var(--shadow-soft);
  border-color: var(--border-2);
}

.lrwIconBtn:focus-visible {
  outline: none;
  box-shadow: var(--ring);
  border-color: rgba(107, 35, 59, 0.28);
}

.lrwIconBtn .ico {
  display: inline-flex;
  width: 18px;
  justify-content: center;
  opacity: 0.92;
}
.lrwIconBtn .txt {
  white-space: nowrap;
}

.lrwBtn.premium,
.lrwIconBtn.premium {
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.86), rgba(255, 255, 255, 0.62));
  border-color: rgba(15, 23, 42, 0.12);
}
.lrwWrap[data-theme="dark"] .lrwBtn.premium,
.lrwWrap[data-theme="dark"] .lrwIconBtn.premium {
  background: rgba(255, 255, 255, 0.06);
  border-color: rgba(255, 255, 255, 0.12);
}

.lrwIconBtn.isOn {
  box-shadow: var(--ring-soft);
  border-color: rgba(107, 35, 59, 0.28);
}

/* -----------------------------
   Settings menu
------------------------------ */
.lrwSettings {
  position: relative;
}

.lrwSettingsMenu {
  position: absolute;
  right: 0;
  top: calc(100% + 10px);
  width: 300px;
  padding: 12px;
  border-radius: 16px;
  border: 1px solid var(--border);
  background: rgba(255, 255, 255, 0.86);
  box-shadow: var(--shadow);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
}

.lrwWrap[data-theme="dark"] .lrwSettingsMenu {
  background: rgba(14, 18, 32, 0.92);
  border-color: rgba(255, 255, 255, 0.12);
}

.lrwSettingsMenu .g {
  display: grid;
  grid-template-columns: 70px 1fr;
  gap: 10px;
  padding: 10px 6px;
  border-radius: 14px;
}
.lrwSettingsMenu .g + .g {
  margin-top: 8px;
  border-top: 1px solid var(--border);
}
.lrwWrap[data-theme="dark"] .lrwSettingsMenu .g + .g {
  border-top-color: rgba(255, 255, 255, 0.10);
}

.lrwSettingsMenu .k {
  color: var(--muted);
  font-size: 12px;
  font-weight: 700;
  letter-spacing: -0.01em;
  padding-top: 3px;
}

.lrwSettingsMenu .r {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.lrwMiniBtn {
  appearance: none;
  border: 1px solid var(--border);
  background: rgba(255, 255, 255, 0.72);
  color: rgba(15, 23, 42, 0.88);
  padding: 8px 10px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: 650;
  cursor: pointer;
  transition: transform 120ms ease, box-shadow 120ms ease, border-color 120ms ease, background 120ms ease, opacity 120ms ease;
}

.lrwWrap[data-theme="dark"] .lrwMiniBtn {
  background: rgba(255, 255, 255, 0.06);
  border-color: rgba(255, 255, 255, 0.12);
  color: rgba(255, 255, 255, 0.86);
}

.lrwMiniBtn:hover {
  transform: translateY(-1px);
  box-shadow: var(--shadow-soft);
  border-color: var(--border-2);
}

.lrwMiniBtn.isOn {
  border-color: rgba(107, 35, 59, 0.26);
  box-shadow: var(--ring-soft);
}

/* -----------------------------
   Body layout
------------------------------ */
.lrwBody {
  max-width: 1400px;
  margin: 0 auto;
  padding: 18px 16px 36px;
  display: grid;
  grid-template-columns: 340px minmax(0, 1fr);
  gap: 16px;
}

.lrwRail {
  position: sticky;
  top: 82px; /* matches slightly tighter header */
  align-self: start;
}

.lrwCard {
  border-radius: var(--radius-xl);
  border: 1px solid var(--border);
  background: var(--surface);
  box-shadow: var(--shadow-soft);
  padding: 14px;
}

.lrwWrap[data-theme="dark"] .lrwCard {
  background: rgba(255, 255, 255, 0.06);
  border-color: rgba(255, 255, 255, 0.12);
}

.lrwCard .h {
  font-size: 12px;
  font-weight: 900;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  color: rgba(15, 23, 42, 0.62);
  margin-bottom: 12px;
}
.lrwWrap[data-theme="dark"] .lrwCard .h {
  color: rgba(255, 255, 255, 0.58);
}

.kv {
  display: grid;
  gap: 10px;
}

.kv .row {
  padding: 10px 10px;
  border-radius: 14px;
  border: 1px solid rgba(15, 23, 42, 0.06);
  background: rgba(255, 255, 255, 0.60);
}

.lrwWrap[data-theme="dark"] .kv .row {
  border-color: rgba(255, 255, 255, 0.10);
  background: rgba(255, 255, 255, 0.04);
}

.kv .k {
  font-size: 12px;
  font-weight: 750;
  color: rgba(15, 23, 42, 0.60);
  margin-bottom: 4px;
}

.lrwWrap[data-theme="dark"] .kv .k {
  color: rgba(255, 255, 255, 0.60);
}

.kv .v {
  font-size: 13px;
  font-weight: 650;
  color: rgba(15, 23, 42, 0.92);
  line-height: 1.35;
  word-break: break-word;
}

.lrwWrap[data-theme="dark"] .kv .v {
  color: rgba(255, 255, 255, 0.90);
}

.railActions {
  margin-top: 12px;
  display: grid;
  gap: 10px;
}

.railAccess {
  display: flex;
  align-items: center;
  gap: 10px;
  color: var(--muted);
  font-size: 12px;
}

/* Access chip */
.lrwChip {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 10px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: rgba(255, 255, 255, 0.70);
  font-size: 12px;
  font-weight: 700;
  letter-spacing: -0.01em;
}
.lrwWrap[data-theme="dark"] .lrwChip {
  background: rgba(255, 255, 255, 0.06);
  border-color: rgba(255, 255, 255, 0.12);
  color: rgba(255, 255, 255, 0.86);
}
.lrwChip .dot {
  width: 9px;
  height: 9px;
  border-radius: 999px;
  background: rgba(107, 35, 59, 0.25);
  box-shadow: 0 0 0 3px rgba(107, 35, 59, 0.10);
}
.lrwChip.ok {
  border-color: rgba(16, 185, 129, 0.22);
}
.lrwChip.ok .dot {
  background: rgba(16, 185, 129, 0.70);
  box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.14);
}
.lrwChip.warn {
  border-color: rgba(245, 158, 11, 0.26);
}
.lrwChip.warn .dot {
  background: rgba(245, 158, 11, 0.82);
  box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.14);
}

.lrwMain {
  min-width: 0;
}

/* -----------------------------
   Paper / Reader
------------------------------ */
.lrwPaper {
  border-radius: 26px;
  border: 1px solid var(--paper-border);
  background: var(--paper-bg);
  box-shadow: var(--shadow);
  padding: 20px 20px;
  overflow: hidden;
}

.lrwProse {
  color: var(--paper-ink);
}

.lrwFontSans { font-family: var(--sans); }
.lrwFontSerif { font-family: var(--serif); }

.lrwFs-90 { font-size: 14px; }
.lrwFs-95 { font-size: 14.5px; }
.lrwFs-100 { font-size: 15px; }
.lrwFs-105 { font-size: 15.8px; }
.lrwFs-110 { font-size: 16.6px; }
.lrwFs-115 { font-size: 17.2px; }
.lrwFs-120 { font-size: 18px; }

.lrwDoc {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.lrwBlock {
  padding: 8px 10px;
  border-radius: 16px;
  border: 1px solid rgba(15, 23, 42, 0.06);
  background: rgba(255, 255, 255, 0.34);
}

.lrwWrap[data-theme="dark"] .lrwBlock {
  border-color: rgba(255, 255, 255, 0.08);
  background: rgba(255, 255, 255, 0.03);
}

.lrwBlockH {
  background: linear-gradient(180deg, rgba(107, 35, 59, 0.10), rgba(107, 35, 59, 0.04));
  border-color: rgba(107, 35, 59, 0.12);
}

.lrwH {
  margin: 0;
  font-size: 13.5px;
  font-weight: 900;
  letter-spacing: 0.02em;
  text-transform: uppercase;
  color: rgba(15, 23, 42, 0.78);
}
.lrwWrap[data-theme="dark"] .lrwH { color: rgba(255, 255, 255, 0.78); }

.lrwP {
  margin: 0;
  line-height: 1.78;
  color: var(--paper-ink);
  opacity: 0.96;
  font-weight: 430;
}

.lrwHtml {
  font-size: inherit;
  line-height: 1.78;
  color: var(--paper-ink);
}
.lrwHtml p { margin: 0 0 12px; }
.lrwHtml h1, .lrwHtml h2, .lrwHtml h3, .lrwHtml h4 {
  margin: 14px 0 10px;
  letter-spacing: -0.02em;
}
.lrwHtml a {
  color: var(--la-maroon);
  text-decoration: none;
  border-bottom: 1px solid rgba(107, 35, 59, 0.26);
}
.lrwHtml a:hover { border-bottom-color: rgba(107, 35, 59, 0.46); }

.lrwPaper.isGated { position: relative; }
.lrwPaper.isGated::after {
  content: "";
  position: absolute;
  inset: auto 0 0 0;
  height: 120px;
  pointer-events: none;
  background: linear-gradient(180deg, rgba(255,255,255,0), var(--paper-bg));
}
.lrwWrap[data-theme="dark"] .lrwPaper.isGated::after {
  background: linear-gradient(180deg, rgba(14,18,32,0), var(--paper-bg));
}

/* Subscription gate */
.lrwGateSlot { margin-top: 12px; }

.lrwGate {
  border-radius: 18px;
  border: 1px solid rgba(107, 35, 59, 0.18);
  background:
    radial-gradient(800px 200px at 10% 0%, rgba(107, 35, 59, 0.14), transparent 55%),
    rgba(255, 255, 255, 0.72);
  box-shadow: var(--shadow-soft);
  padding: 14px;
}
.lrwWrap[data-theme="dark"] .lrwGate {
  background:
    radial-gradient(800px 200px at 10% 0%, rgba(107, 35, 59, 0.20), transparent 55%),
    rgba(255, 255, 255, 0.06);
  border-color: rgba(107, 35, 59, 0.28);
}

.lrwGateTop { display: flex; align-items: center; gap: 10px; }

.lrwGateIcon {
  width: 36px;
  height: 36px;
  border-radius: 14px;
  display: grid;
  place-items: center;
  background: rgba(107, 35, 59, 0.12);
  border: 1px solid rgba(107, 35, 59, 0.18);
}

.lrwGateTitle {
  font-size: 14px;
  font-weight: 900;
  letter-spacing: -0.02em;
}

.lrwGateMsg {
  margin-top: 8px;
  color: var(--muted);
  font-size: 13px;
  line-height: 1.5;
}

.lrwGateReason {
  margin-top: 6px;
  color: rgba(107, 35, 59, 0.92);
  font-weight: 750;
}

.lrwGateActions {
  margin-top: 12px;
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

/* -----------------------------
   Drawer (LegalAI)
------------------------------ */
.lrwDrawer {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 60;
}

.lrwDrawer.open { pointer-events: auto; }

.lrwDrawerOverlay {
  position: absolute;
  inset: 0;
  background: rgba(2, 6, 23, 0.42);
  opacity: 0;
  transition: opacity 180ms ease;
}
.lrwDrawer.open .lrwDrawerOverlay { opacity: 1; }

.lrwDrawerPanel {
  position: absolute;
  top: 0;
  right: 0;
  height: 100%;
  width: min(560px, 92vw);
  background:
    radial-gradient(1200px 700px at 10% 0%, rgba(107, 35, 59, 0.10), transparent 55%),
    rgba(255, 255, 255, 0.92);
  border-left: 1px solid var(--border);
  box-shadow: var(--shadow);
  transform: translateX(12px);
  opacity: 0;
  transition: transform 200ms ease, opacity 200ms ease;
  display: flex;
  flex-direction: column;
  min-height: 0; /* important for nested scroll */
}

.lrwWrap[data-theme="dark"] .lrwDrawerPanel {
  background:
    radial-gradient(1200px 700px at 10% 0%, rgba(107, 35, 59, 0.20), transparent 55%),
    rgba(14, 18, 32, 0.96);
  border-left-color: rgba(255, 255, 255, 0.12);
}

.lrwDrawer.open .lrwDrawerPanel {
  transform: translateX(0);
  opacity: 1;
}

/* Drawer header */
.lrwDrawerHead {
  padding: 16px 16px 12px;
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 12px;
}

.lrwWrap[data-theme="dark"] .lrwDrawerHead {
  border-bottom-color: rgba(255, 255, 255, 0.12);
}

.lrwDrawerHead .ttl {
  font-size: 16px;
  font-weight: 900;
  letter-spacing: -0.02em;
}
.lrwDrawerHead .sub {
  margin-top: 4px;
  color: var(--muted);
  font-size: 12.5px;
  line-height: 1.35;
}

/* ✅ NEW: scrollable drawer body */
.lrwDrawerBody {
  flex: 1;
  min-height: 0;
  overflow: auto;
  padding: 12px 16px 12px;
  overscroll-behavior: contain;
  display: block;
}

/* Locked block */
.lrwAiLocked {
  margin: 16px;
  padding: 16px;
  border-radius: 18px;
  border: 1px solid rgba(107, 35, 59, 0.18);
  background: rgba(255, 255, 255, 0.70);
  box-shadow: var(--shadow-soft);
  display: grid;
  grid-template-columns: 44px 1fr;
  gap: 12px;
  align-items: start;
}
.lrwWrap[data-theme="dark"] .lrwAiLocked {
  background: rgba(255, 255, 255, 0.06);
  border-color: rgba(107, 35, 59, 0.28);
}
.lrwAiLocked .x {
  width: 44px;
  height: 44px;
  border-radius: 16px;
  display: grid;
  place-items: center;
  background: rgba(107, 35, 59, 0.12);
  border: 1px solid rgba(107, 35, 59, 0.18);
}
.lrwAiLocked .h { font-weight: 900; letter-spacing: -0.02em; }
.lrwAiLocked .s { margin-top: 4px; color: var(--muted); font-size: 13px; }

/* AI alert */
.lrwAiAlert {
  margin: 14px 16px 0;
  border-radius: 18px;
  border: 1px solid rgba(185, 28, 28, 0.22);
  background: rgba(254, 242, 242, 0.80);
  padding: 12px;
}
.lrwWrap[data-theme="dark"] .lrwAiAlert {
  background: rgba(127, 29, 29, 0.22);
  border-color: rgba(185, 28, 28, 0.40);
}
.lrwAiAlert .h {
  font-weight: 900;
  letter-spacing: -0.02em;
  color: rgba(127, 29, 29, 0.92);
}
.lrwWrap[data-theme="dark"] .lrwAiAlert .h { color: rgba(255, 255, 255, 0.90); }
.lrwAiAlert .s { margin-top: 6px; font-size: 13px; color: rgba(127, 29, 29, 0.90); }
.lrwWrap[data-theme="dark"] .lrwAiAlert .s { color: rgba(255, 255, 255, 0.74); }
.lrwAiAlert .a { margin-top: 10px; display: flex; gap: 10px; flex-wrap: wrap; }

/* Tabs */
.lrwAiTabs {
  padding: 12px 16px 8px;
  display: flex;
  gap: 10px;
}

.tab {
  border: 1px solid var(--border);
  background: rgba(255, 255, 255, 0.70);
  border-radius: 999px;
  padding: 8px 12px;
  font-size: 12px;
  font-weight: 800;
  cursor: pointer;
  transition: transform 120ms ease, box-shadow 120ms ease, border-color 120ms ease, background 120ms ease;
}
.lrwWrap[data-theme="dark"] .tab {
  background: rgba(255, 255, 255, 0.06);
  border-color: rgba(255, 255, 255, 0.12);
  color: rgba(255, 255, 255, 0.86);
}
.tab:hover {
  transform: translateY(-1px);
  box-shadow: var(--shadow-soft);
  border-color: var(--border-2);
}
.tab.on {
  border-color: rgba(107, 35, 59, 0.26);
  background: rgba(107, 35, 59, 0.10);
  box-shadow: var(--ring-soft);
}
/* =======================================================
   PATCH: Make button/tab text + icons always visible
   (fixes faint icons/text + inconsistent SVG sizing)
   ======================================================= */

/* 1) Ensure tabs + seg buttons are true "icon buttons" (even if text-only) */
.tab,
.segBtn,
.lrwBtn,
.lrwIconBtn,
.lrwMiniBtn,
.lrwSuggest,
.mini {
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
}

/* 2) Strong default text color (light theme) */
.tab,
.segBtn {
  color: rgba(15, 23, 42, 0.88);
}

/* 3) Tabs: align icon + text nicely and make them feel clickable */
.tab {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  line-height: 1;
}

/* 4) If your Tab content includes any SVG/icon component, normalize it */
.tab svg,
.segBtn svg,
.lrwBtn svg,
.lrwIconBtn svg,
.lrwMiniBtn svg,
.lrwSuggest svg,
.mini svg {
  width: 16px;
  height: 16px;
  flex: 0 0 auto;
  display: block;
  /* for outline icons */
  stroke: currentColor;
  /* for solid icons */
  fill: currentColor;
  opacity: 0.95;
}

/* If you use stroke-only icons (heroicons outline etc.), prevent heavy fills */
.tab svg[fill="none"],
.segBtn svg[fill="none"],
.lrwIconBtn svg[fill="none"] {
  fill: none;
}

/* 5) Active states: make sure text/icons pop */
.tab.on {
  color: rgba(107, 35, 59, 0.98);
}

.lrwWrap[data-theme="dark"] .tab.on {
  color: rgba(255, 255, 255, 0.95);
}

/* 6) Segmented buttons: make active more readable */
.segBtn.on {
  color: rgba(107, 35, 59, 0.98);
}

/* 7) Icon slot in lrwIconBtn: keep it crisp */
.lrwIconBtn .ico {
  width: 18px;
  height: 18px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}
.lrwIconBtn .ico svg {
  width: 18px;
  height: 18px;
}

/* Stack now just layout (scroll is handled by .lrwDrawerBody) */
.lrwAiStack {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* AI Cards */
.lrwAiCard {
  border-radius: 20px;
  border: 1px solid var(--border);
  background: rgba(255, 255, 255, 0.72);
  box-shadow: var(--shadow-soft);
  padding: 12px;
}
.lrwWrap[data-theme="dark"] .lrwAiCard {
  background: rgba(255, 255, 255, 0.06);
  border-color: rgba(255, 255, 255, 0.12);
}

.lrwAiCardAccent {
  border-color: rgba(107, 35, 59, 0.18);
  background:
    radial-gradient(900px 260px at 10% 0%, rgba(107, 35, 59, 0.12), transparent 55%),
    rgba(255, 255, 255, 0.72);
}
.lrwWrap[data-theme="dark"] .lrwAiCardAccent {
  background:
    radial-gradient(900px 260px at 10% 0%, rgba(107, 35, 59, 0.22), transparent 55%),
    rgba(255, 255, 255, 0.06);
  border-color: rgba(107, 35, 59, 0.28);
}

.lrwAiCardSoft { background: rgba(255, 255, 255, 0.62); }
.lrwWrap[data-theme="dark"] .lrwAiCardSoft { background: rgba(255, 255, 255, 0.05); }

.lrwAiCardHead {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin-bottom: 10px;
}
.lrwAiCardHead .ttl { font-size: 13px; font-weight: 900; letter-spacing: -0.02em; }
.lrwAiCardHead .sub { font-size: 12px; color: var(--muted); }

.lrwAiRow {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  flex-wrap: wrap;
}
.rowActions { display: flex; gap: 10px; flex-wrap: wrap; align-items: center; }
.note { color: var(--muted); font-size: 12.5px; }

/* Seg */
.seg {
  display: inline-flex;
  border: 1px solid var(--border);
  border-radius: 999px;
  overflow: hidden;
  background: rgba(255, 255, 255, 0.70);
}
.lrwWrap[data-theme="dark"] .seg {
  background: rgba(255, 255, 255, 0.06);
  border-color: rgba(255, 255, 255, 0.12);
}
.segBtn {
  border: none;
  background: transparent;
  padding: 8px 12px;
  font-size: 12px;
  font-weight: 850;
  cursor: pointer;
  color: rgba(15, 23, 42, 0.82);
}
.lrwWrap[data-theme="dark"] .segBtn { color: rgba(255, 255, 255, 0.84); }
.segBtn.on {
  background: rgba(107, 35, 59, 0.10);
  color: rgba(107, 35, 59, 0.96);
}
.lrwWrap[data-theme="dark"] .segBtn.on {
  background: rgba(107, 35, 59, 0.26);
  color: rgba(255, 255, 255, 0.92);
}

/* AI loading/empty */
.lrwAiLoading { margin-top: 10px; font-size: 13px; color: var(--muted); }

.lrwAiEmpty {
  margin-top: 10px;
  padding: 12px;
  border-radius: 16px;
  border: 1px dashed rgba(15, 23, 42, 0.16);
  background: rgba(255, 255, 255, 0.52);
}
.lrwWrap[data-theme="dark"] .lrwAiEmpty {
  background: rgba(255, 255, 255, 0.04);
  border-color: rgba(255, 255, 255, 0.14);
}
.lrwAiEmpty .t { font-weight: 900; letter-spacing: -0.02em; }
.lrwAiEmpty .s { margin-top: 4px; color: var(--muted); font-size: 13px; }

.lrwAiAnswer .meta { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }

.pill {
  display: inline-flex;
  align-items: center;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: rgba(255, 255, 255, 0.62);
  font-size: 12px;
  font-weight: 750;
  color: rgba(15, 23, 42, 0.70);
}
.lrwWrap[data-theme="dark"] .pill {
  background: rgba(255, 255, 255, 0.06);
  border-color: rgba(255, 255, 255, 0.12);
  color: rgba(255, 255, 255, 0.72);
}
.pill.soft {
  background: rgba(107, 35, 59, 0.07);
  border-color: rgba(107, 35, 59, 0.18);
  color: rgba(107, 35, 59, 0.92);
}
.lrwWrap[data-theme="dark"] .pill.soft {
  background: rgba(107, 35, 59, 0.24);
  border-color: rgba(107, 35, 59, 0.30);
  color: rgba(255, 255, 255, 0.88);
}

.mini {
  border: none;
  background: transparent;
  color: rgba(107, 35, 59, 0.92);
  cursor: pointer;
  font-weight: 850;
  font-size: 12px;
  padding: 6px 8px;
  border-radius: 10px;
}
.mini:hover { background: rgba(107, 35, 59, 0.08); }
.lrwWrap[data-theme="dark"] .mini { color: rgba(255, 255, 255, 0.86); }
.lrwWrap[data-theme="dark"] .mini:hover { background: rgba(255, 255, 255, 0.08); }

.lrwAiSummaryTitle { padding: 6px 4px 0; }
.lrwAiSummaryTitle .p { font-size: 14px; font-weight: 950; letter-spacing: -0.02em; }
.lrwAiSummaryTitle .c { margin-top: 6px; font-size: 12.5px; color: var(--muted); font-weight: 700; }

/* RichText */
.lrwAiFmt {
  font-size: 13px;
  line-height: 1.55;
  color: rgba(15, 23, 42, 0.92);
  font-weight: 440;
}
.lrwWrap[data-theme="dark"] .lrwAiFmt { color: rgba(255, 255, 255, 0.88); }

.lrwAiP { margin: 0 0 8px; }
.lrwAiSpacer { height: 8px; }
.lrwAiH { margin: 10px 0 8px; font-weight: 950; letter-spacing: -0.02em; }
.lrwAiH-2 { font-size: 13.5px; }
.lrwAiH-3 { font-size: 13px; }
.lrwAiH-4 { font-size: 12.5px; opacity: 0.92; }

.lrwAiList {
  margin: 0;
  padding-left: 18px;
  display: grid;
  gap: 6px;
}
.lrwAiList li { margin: 0; }

/* -----------------------------
   Chat (fixed)
------------------------------ */
.lrwAiChat {
  margin-top: 12px;
  border-radius: 18px;
  border: 1px solid var(--border);
  background: rgba(255, 255, 255, 0.55);
  padding: 12px;
  overflow: auto;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.lrwAiChatTight { max-height: 360px; }

.lrwWrap[data-theme="dark"] .lrwAiChat {
  background: rgba(255, 255, 255, 0.05);
  border-color: rgba(255, 255, 255, 0.12);
}

/* ✅ Chat tab becomes flex-based */
.lrwAiChatPanel {
  display: flex;
  flex-direction: column;
  min-height: 0;
}

.lrwAiChatFlex {
  flex: 1;
  min-height: 180px;
  max-height: none; /* important */
}

/* Message cards */
.lrwMsgCard {
  border-radius: 18px;
  border: 1px solid rgba(15, 23, 42, 0.10);
  background: rgba(255, 255, 255, 0.72);
  box-shadow: 0 6px 16px rgba(17, 24, 39, 0.08);
  padding: 10px 10px;
}
.lrwWrap[data-theme="dark"] .lrwMsgCard {
  background: rgba(255, 255, 255, 0.06);
  border-color: rgba(255, 255, 255, 0.12);
}

.lrwMsgCard.user {
  border-color: rgba(107, 35, 59, 0.20);
  background:
    radial-gradient(800px 250px at 20% 0%, rgba(107, 35, 59, 0.12), transparent 55%),
    rgba(255, 255, 255, 0.72);
}
.lrwWrap[data-theme="dark"] .lrwMsgCard.user {
  background:
    radial-gradient(800px 250px at 20% 0%, rgba(107, 35, 59, 0.22), transparent 55%),
    rgba(255, 255, 255, 0.06);
  border-color: rgba(107, 35, 59, 0.30);
}

.lrwMsgCard.assistant { background: rgba(255, 255, 255, 0.68); }
.lrwWrap[data-theme="dark"] .lrwMsgCard.assistant { background: rgba(255, 255, 255, 0.05); }

.lrwMsgCardTop {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 6px;
}
.lrwMsgCardTop .who {
  font-size: 12px;
  font-weight: 900;
  letter-spacing: 0.05em;
  text-transform: uppercase;
  color: rgba(15, 23, 42, 0.56);
}
.lrwWrap[data-theme="dark"] .lrwMsgCardTop .who { color: rgba(255, 255, 255, 0.56); }

.lrwMsgCardBody {
  font-size: 13px;
  line-height: 1.55;
  font-weight: 430;
  color: rgba(15, 23, 42, 0.92);
}
.lrwWrap[data-theme="dark"] .lrwMsgCardBody { color: rgba(255, 255, 255, 0.88); }

.lrwMsgCard.isTyping .typing { display: inline-flex; gap: 6px; padding: 6px 4px; }
.lrwMsgCard.isTyping .typing span {
  width: 7px;
  height: 7px;
  border-radius: 999px;
  background: rgba(107, 35, 59, 0.35);
  animation: lrwDot 1.1s infinite ease-in-out;
}
.lrwMsgCard.isTyping .typing span:nth-child(2) { animation-delay: 0.12s; }
.lrwMsgCard.isTyping .typing span:nth-child(3) { animation-delay: 0.24s; }
@keyframes lrwDot {
  0%, 100% { transform: translateY(0); opacity: 0.55; }
  50% { transform: translateY(-4px); opacity: 1; }
}

/* Composer */
.lrwAiComposer {
  margin-top: 12px;
  display: grid;
  gap: 10px;
}

.lrwAiComposer .inp {
  width: 100%;
  min-height: 92px;
  resize: vertical;
  border-radius: 18px;
  border: 1px solid var(--border);
  background: rgba(255, 255, 255, 0.72);
  padding: 12px;
  outline: none;
  font-size: 13px;
  font-weight: 430;
  line-height: 1.5;
  color: rgba(15, 23, 42, 0.92);
}
.lrwWrap[data-theme="dark"] .lrwAiComposer .inp {
  background: rgba(255, 255, 255, 0.06);
  border-color: rgba(255, 255, 255, 0.12);
  color: rgba(255, 255, 255, 0.88);
}
.lrwAiComposer .inp:focus {
  box-shadow: var(--ring);
  border-color: rgba(107, 35, 59, 0.28);
}

.composerActions {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  flex-wrap: wrap;
}
.hint { color: var(--muted); font-size: 12px; }

.lrwSuggestRow { display: flex; gap: 8px; flex-wrap: wrap; }
.lrwSuggestRowFull { margin-top: 2px; }

.lrwSuggest {
  border: 1px solid var(--border);
  background: rgba(255, 255, 255, 0.62);
  color: rgba(15, 23, 42, 0.86);
  border-radius: 999px;
  padding: 7px 10px;
  font-size: 12px;
  font-weight: 750;
  cursor: pointer;
  transition: transform 120ms ease, box-shadow 120ms ease, border-color 120ms ease, background 120ms ease;
}
.lrwWrap[data-theme="dark"] .lrwSuggest {
  background: rgba(255, 255, 255, 0.06);
  border-color: rgba(255, 255, 255, 0.12);
  color: rgba(255, 255, 255, 0.86);
}
.lrwSuggest:hover {
  transform: translateY(-1px);
  box-shadow: var(--shadow-soft);
  border-color: var(--border-2);
}

/* Drawer foot */
.lrwAiFoot {
  padding: 10px 16px 14px;
  border-top: 1px solid var(--border);
  color: var(--muted);
  font-size: 12px;
  line-height: 1.35;
}
.lrwWrap[data-theme="dark"] .lrwAiFoot {
  border-top-color: rgba(255, 255, 255, 0.12);
}

/* -----------------------------
   Responsive
------------------------------ */
@media (max-width: 1100px) {
  .lrwBody { grid-template-columns: 1fr; }
  .lrwRail { position: relative; top: auto; }
  .lrwTopInner { align-items: flex-start; }
  .lrwTitle { white-space: normal; }
}

@media (max-width: 680px) {
  .lrwTopInner { padding: 12px 12px; gap: 10px; }
  .lrwTopActions { gap: 8px; }
  .lrwBtn, .lrwIconBtn { padding: 9px 10px; border-radius: 14px; }
  .lrwPaper { padding: 14px 14px; border-radius: 22px; }
  .lrwBody { padding: 14px 12px 26px; }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  .lrwBtn, .lrwIconBtn, .lrwMiniBtn, .tab, .segBtn, .lrwSuggest { transition: none; }
  .lrwDrawerOverlay, .lrwDrawerPanel { transition: none; }
  .lrwMsgCard.isTyping .typing span { animation: none; }
}
