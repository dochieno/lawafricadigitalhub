/* =========================================================
   LawReportReader v2 — CLEANED (DEDUPED, CANONICAL)
   - Themes (paper/sepia/dark)
   - Sticky header + search + dropdown
   - Meta card + tabs + transcript tools
   - Preview gating (fade + sticky subscribe)
   - Split layout (Transcript + AI) + mode toggles
   - LegalAI UI (chat, summary, sections, takeaways)
========================================================= */

/* =========================================================
   0) Global smoothing + reduced motion
========================================================= */
.lrr2Wrap {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
.lrr2Wrap ::selection {
  background: rgba(161, 24, 30, 0.18);
}
@media (prefers-reduced-motion: reduce) {
  .lrr2Wrap * {
    animation: none !important;
    transition: none !important;
    scroll-behavior: auto !important;
  }
}

/* Premium assistant bubble polish */
.lrrAiChat--premium .lrrAiMsg.assistant .bubble {
  border: 1px solid rgba(17, 24, 39, 0.10);
  background: rgba(255, 255, 255, 0.78);
  box-shadow: 0 12px 30px rgba(0,0,0,0.08);
  border-radius: 18px;
}

/* Premium user bubble polish */
.lrrAiChat--premium .lrrAiMsg.user .bubble {
  border: 1px solid rgba(161, 18, 18, 0.18);
  background: rgba(161, 18, 18, 0.07);
  box-shadow: 0 10px 24px rgba(161, 18, 18, 0.10);
  border-radius: 18px;
}

/* Typography tight + clean */
.lrrAiChat--premium .lrrAiFmt { font-size: 14px; line-height: 1.6; }
.lrrAiChat--premium .lrrAiP { margin: 0.35rem 0; }
.lrrAiChat--premium .lrrAiList { margin: 0.35rem 0 0.55rem; padding-left: 1.1rem; }
.lrrAiChat--premium .lrrAiList li { margin: 0.25rem 0; }

/* =========================================================
   1) Root wrapper + theme tokens
========================================================= */
.lrr2Wrap {
  /* brand */
  --la-red: #a1181e;
  --la-red2: #702840;
  --la-teal: #0ea5a5;

  /* neutrals */
  --ink: rgba(15, 23, 42, 0.92);
  --muted: rgba(15, 23, 42, 0.62);
  --border: rgba(15, 23, 42, 0.12);

  /* surfaces */
  --surface: rgba(255, 255, 255, 0.92);
  --surface2: rgba(255, 255, 255, 0.78);

  /* shadows */
  --shadow: 0 12px 40px rgba(2, 6, 23, 0.08);
  --shadow2: 0 10px 30px rgba(2, 6, 23, 0.10);

  /* radii */
  --radius: 18px;

  /* transcript */
  --pageBg: rgba(255, 255, 255, 0.92);
  --pageInk: rgba(15, 23, 42, 0.92);

  /* focus */
  --focusRing: 0 0 0 4px rgba(161, 24, 30, 0.12);
  --focusBorder: rgba(161, 24, 30, 0.38);

  /* AI */
  --ai-surface: color-mix(in srgb, var(--surface) 88%, transparent);
  --ai-border: color-mix(in srgb, var(--border) 80%, rgba(161, 24, 30, 0.10));
  --ai-shadow: 0 14px 42px rgba(2, 6, 23, 0.10);
  --ai-radius: 18px;

  min-height: 100vh;
  padding: 18px 16px 56px;
  color: var(--ink);
  background:
    radial-gradient(1200px 600px at 20% -10%, rgba(161, 24, 30, 0.09), transparent 55%),
    radial-gradient(900px 520px at 100% 0%, rgba(15, 23, 42, 0.06), transparent 50%),
    #f7f8fb;
}

/* Themes driven by: <div className="lrr2Wrap" data-theme="..."> */
.lrr2Wrap[data-theme="paper"] {
  --ink: rgba(15, 23, 42, 0.92);
  --muted: rgba(15, 23, 42, 0.62);
  --border: rgba(15, 23, 42, 0.12);
  --surface: rgba(255, 255, 255, 0.92);
  --surface2: rgba(255, 255, 255, 0.78);
  --pageBg: rgba(255, 255, 255, 0.92);
  --pageInk: rgba(15, 23, 42, 0.92);
}

.lrr2Wrap[data-theme="sepia"] {
  --ink: rgba(20, 18, 14, 0.92);
  --muted: rgba(62, 41, 25, 0.62);
  --border: rgba(62, 41, 25, 0.16);
  --surface: rgba(255, 248, 235, 0.86);
  --surface2: rgba(255, 248, 235, 0.78);
  --pageBg: rgba(250, 245, 235, 0.92);
  --pageInk: rgba(20, 18, 14, 0.92);

  --focusRing: 0 0 0 4px rgba(161, 24, 30, 0.10);
  --focusBorder: rgba(161, 24, 30, 0.34);

  background:
    radial-gradient(1200px 600px at 20% -10%, rgba(161, 24, 30, 0.06), transparent 55%),
    radial-gradient(900px 520px at 100% 0%, rgba(62, 41, 25, 0.08), transparent 50%),
    #f3eee6;
}

/* LegalAI disclaimer – subtle, centered, premium */
.lrrAiFooterDisc{
  margin-top: 10px;
  text-align: center;

  font-size: 12px;          /* smaller */
  font-style: italic;       /* italic */
  font-weight: 400;         /* not bold */

  color: rgba(17, 24, 39, 0.55);
}

/* Dark mode support */
.lrr2Wrap[data-theme="dark"] .lrrAiDisclaimer {
  color: rgba(226, 232, 240, 0.55);
}

.lrr2Wrap[data-theme="dark"] {
  --ink: rgba(226, 232, 240, 0.92);
  --muted: rgba(148, 163, 184, 0.72);
  --border: rgba(148, 163, 184, 0.18);
  --surface: rgba(15, 23, 42, 0.72);
  --surface2: rgba(15, 23, 42, 0.56);
  --pageBg: rgba(2, 6, 23, 0.70);
  --pageInk: rgba(226, 232, 240, 0.92);

  --shadow: 0 14px 48px rgba(0, 0, 0, 0.28);
  --shadow2: 0 12px 36px rgba(0, 0, 0, 0.26);

  --focusRing: 0 0 0 4px rgba(226, 232, 240, 0.10);
  --focusBorder: rgba(226, 232, 240, 0.30);

  background:
    radial-gradient(1200px 600px at 20% -10%, rgba(161, 24, 30, 0.16), transparent 55%),
    radial-gradient(900px 520px at 100% 0%, rgba(255, 255, 255, 0.06), transparent 50%),
    #050914;
}

/* =========================================================
   2) Shared cards + width rhythm
========================================================= */
.lrr2Header,
.lrr2MetaCard,
.lrr2TranscriptTools,
.lrr2Panel,
.lrr2Empty,
.lrr2Loading,
.lrr2Error {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
}

/* width rhythm */
.lrr2Header,
.lrr2TopGrid,
.lrr2Tabs,
.lrr2Content,
.lrr2Progress {
  max-width: 1000px;
  margin-left: auto;
  margin-right: auto;
}

/* =========================================================
   3) Loading / error
========================================================= */
.lrr2Loading {
  margin-top: 18px;
  padding: 14px;
  font-weight: 750;
  color: var(--muted);
}

.lrr2Error {
  margin-top: 18px;
  padding: 14px;
}
.lrr2ErrorTitle {
  font-weight: 900;
  color: #b91c1c;
}
.lrr2ErrorMsg {
  margin-top: 6px;
  color: var(--muted);
  font-weight: 650;
  line-height: 1.55;
}
.lrr2TopActions {
  margin-top: 12px;
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

/* =========================================================
   4) Header + search
========================================================= */
.lrr2Header {
  margin-top: 0;
  padding: 14px 14px 12px;
  position: sticky;
  top: 10px;
  z-index: 80;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}
.lrr2Wrap[data-theme="paper"] .lrr2Header,
.lrr2Wrap[data-theme="sepia"] .lrr2Header {
  background: color-mix(in srgb, var(--surface) 82%, transparent);
}
.lrr2Wrap[data-theme="dark"] .lrr2Header {
  background: color-mix(in srgb, var(--surface) 72%, transparent);
}

.lrr2Header.isCompact {
  padding: 10px 12px 10px;
  box-shadow: var(--shadow2);
  border-color: color-mix(in srgb, var(--border) 75%, rgba(161, 24, 30, 0.10));
}

.lrr2HeaderTop {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 14px;
  flex-wrap: wrap;
}

.lrr2Brand {
  font-size: 18px;
  font-weight: 900;
  letter-spacing: -0.02em;
  color: var(--ink);
  display: inline-flex;
  align-items: center;
  gap: 10px;
}
.lrr2Header.isCompact .lrr2Brand {
  font-size: 16px;
}

/* (optional) Icon pill for header actions */
.lrr2IconPill {
  border: 1px solid color-mix(in srgb, var(--border) 75%, rgba(161, 24, 30, 0.10));
  background: color-mix(in srgb, var(--surface) 78%, transparent);
  color: var(--ink);
  border-radius: 999px;
  height: 42px;
  padding: 0 14px;
  cursor: pointer;
  font-weight: 900;
  display: inline-flex;
  align-items: center;
  gap: 10px;
  box-shadow: 0 10px 26px rgba(2, 6, 23, 0.08);
  transition: transform .12s ease, background .12s ease, border-color .12s ease, box-shadow .12s ease;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}
.lrr2IconPill:hover {
  transform: translateY(-1px);
  background: color-mix(in srgb, var(--surface) 92%, transparent);
  border-color: color-mix(in srgb, var(--border) 65%, rgba(161, 24, 30, 0.22));
  box-shadow: 0 14px 34px rgba(2, 6, 23, 0.10);
}
.lrr2IconPill svg {
  width: 18px;
  height: 18px;
  opacity: 0.95;
}
.lrr2IconPill .txt {
  font-size: 13px;
  font-weight: 950;
}
.lrr2IconPill.iconOnly {
  width: 44px;
  padding: 0;
  justify-content: center;
}
.lrr2IconPill.iconOnly .txt { display: none; }

.lrr2LinkBtn {
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--surface) 82%, transparent);
  color: var(--ink);
  padding: 10px 14px;
  border-radius: 999px;
  cursor: pointer;
  font-weight: 800;
  transition: transform .12s ease, background .12s ease, border-color .12s ease;
}
.lrr2LinkBtn:hover {
  transform: translateY(-1px);
  background: color-mix(in srgb, var(--surface) 95%, transparent);
  border-color: color-mix(in srgb, var(--border) 70%, rgba(161, 24, 30, 0.18));
}

.lrr2SearchRow {
  margin-top: 12px;
  display: grid;
  gap: 10px;
}
.lrr2Header.isCompact .lrr2SearchRow {
  margin-top: 10px;
}

.lrr2SearchBox {
  position: relative;
  display: flex;
  gap: 10px;
  align-items: center;
  flex-wrap: wrap;
}

.lrr2SearchLead {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  color: var(--muted);
  font-weight: 700;
  font-size: 12px;
  padding: 10px 12px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--surface) 86%, transparent);
}
.lrr2SearchLead svg {
  width: 18px;
  height: 18px;
  opacity: 0.9;
}
@media (max-width: 640px) {
  .lrr2SearchLead {
    width: 100%;
    justify-content: flex-start;
  }
}

.lrr2SearchInput {
  flex: 1;
  min-width: 260px;
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--surface) 88%, transparent);
  color: var(--ink);
  border-radius: 999px;
  padding: 12px 16px;
  outline: none;
  font-weight: 650;
}
.lrr2SearchInput:focus {
  border-color: var(--focusBorder);
  box-shadow: var(--focusRing);
  background: color-mix(in srgb, var(--surface) 96%, transparent);
}
.lrr2SearchInput::placeholder {
  color: color-mix(in srgb, var(--muted) 85%, transparent);
}

/* search button as pill */
.lrr2SearchBtn {
  background: rgba(15, 23, 42, 0.86);
  color: #fff;
  border: 1px solid rgba(15, 23, 42, 0.86);
  border-radius: 999px;
  height: 42px;
  padding: 0 14px;
  cursor: pointer;
  font-weight: 850;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  box-shadow: 0 10px 26px rgba(2, 6, 23, 0.10);
  transition: transform .12s ease, opacity .12s ease, filter .12s ease;
}
.lrr2SearchBtn svg {
  width: 18px;
  height: 18px;
  opacity: 0.95;
}
.lrr2SearchBtn:hover { transform: translateY(-1px); filter: brightness(1.02); }
.lrr2SearchBtn:disabled { opacity: 0.6; cursor: not-allowed; transform: none; }

.lrr2Wrap[data-theme="dark"] .lrr2SearchBtn {
  background: rgba(226, 232, 240, 0.14);
  color: rgba(226, 232, 240, 0.92);
  border-color: rgba(148, 163, 184, 0.22);
}

.lrr2SearchHint {
  font-size: 12px;
  color: var(--muted);
  font-weight: 650;
}

/* Dropdown */
.lrr2SearchDropdown {
  position: absolute;
  top: calc(100% + 10px);
  left: 0;
  right: 0;
  z-index: 100;
  border-radius: 16px;
  border: 1px solid var(--border);
  background: var(--surface);
  box-shadow: var(--shadow2);
  overflow: hidden;
  max-height: min(360px, 52vh);
  overflow-y: auto;
}
.lrr2SearchDropdown::-webkit-scrollbar { width: 10px; }
.lrr2SearchDropdown::-webkit-scrollbar-thumb {
  background: color-mix(in srgb, var(--border) 70%, transparent);
  border-radius: 999px;
  border: 2px solid transparent;
  background-clip: content-box;
}

.lrr2SearchErr {
  padding: 12px 14px;
  color: #b91c1c;
  font-weight: 800;
  background: rgba(185, 28, 28, 0.08);
  border-bottom: 1px solid rgba(185, 28, 28, 0.18);
}

.lrr2SearchItem {
  width: 100%;
  border: 0;
  background: transparent;
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 14px;
  padding: 12px 14px;
  cursor: pointer;
  text-align: left;
}
.lrr2SearchItem:hover { background: rgba(15, 23, 42, 0.04); }
.lrr2SearchItem:focus-visible {
  outline: none;
  box-shadow: inset 0 0 0 2px rgba(161, 24, 30, 0.22);
  background: rgba(161, 24, 30, 0.06);
}

.lrr2SearchItemLeft { min-width: 0; flex: 1; }
.lrr2SearchItemTitle { font-weight: 850; line-height: 1.25; color: var(--ink); }
.lrr2SearchItemMeta {
  margin-top: 4px;
  font-size: 12px;
  color: var(--muted);
  font-weight: 650;
}
.lrr2SearchItemRight {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  justify-content: flex-end;
  max-width: 46%;
}

.lrr2Tag {
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--surface) 86%, transparent);
  color: var(--ink);
  border-radius: 999px;
  padding: 6px 10px;
  font-size: 12px;
  font-weight: 750;
  line-height: 1;
}
.lrr2Tag.soft { background: rgba(15, 23, 42, 0.06); }

/* Tooltips via data-tip */
[data-tip] { position: relative; }
[data-tip]:hover::after,
[data-tip]:focus-visible::after {
  content: attr(data-tip);
  position: absolute;
  top: calc(100% + 10px);
  right: 0;
  white-space: nowrap;
  padding: 8px 10px;
  border-radius: 12px;
  background: rgba(2, 6, 23, 0.92);
  color: rgba(255, 255, 255, 0.94);
  font-size: 12px;
  font-weight: 750;
  z-index: 200;
  box-shadow: 0 14px 34px rgba(2, 6, 23, 0.22);
}

/* =========================================================
   5) Progress + ToTop
========================================================= */
.lrr2Progress {
  position: sticky;
  top: 0;
  z-index: 60;
  height: 3px;
  margin-top: 10px;
  background: transparent;
}
.lrr2ProgressBar {
  height: 3px;
  width: 100%;
  transform-origin: left center;
  transform: scaleX(0);
  background: linear-gradient(90deg, rgba(161,24,30,0.0), rgba(161,24,30,0.85), rgba(15,23,42,0.85));
  border-radius: 99px;
}

.lrr2ToTop {
  position: fixed;
  right: 18px;
  bottom: 18px;
  z-index: 70;
  border: 1px solid var(--border);
  background: var(--surface);
  color: var(--ink);
  border-radius: 999px;
  width: 44px;
  height: 44px;
  cursor: pointer;
  box-shadow: var(--shadow2);
  font-weight: 900;
  transition: transform .12s ease, background .12s ease;
}
.lrr2ToTop:hover {
  transform: translateY(-2px);
  background: color-mix(in srgb, var(--surface) 96%, transparent);
}
@media (max-width: 640px) {
  .lrr2ToTop { right: 12px; bottom: 12px; }
}

/* =========================================================
   6) Top grid + premium meta
========================================================= */
.lrr2TopGrid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 14px;
  margin-top: 14px;
}
.lrr2TopGrid--single { grid-template-columns: 1fr !important; }

.lrr2MetaCard {
  position: relative;
  padding: 16px;
  overflow: hidden;
}

/* Premium ring */
.lrr2MetaCard::before {
  content: "";
  position: absolute;
  inset: 0;
  padding: 1px;
  border-radius: var(--radius);
  background: linear-gradient(
    135deg,
    rgba(161, 24, 30, 0.38),
    rgba(14, 165, 165, 0.18),
    rgba(15, 23, 42, 0.14)
  );
  -webkit-mask:
    linear-gradient(#000 0 0) content-box,
    linear-gradient(#000 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  pointer-events: none;
  mask:
    linear-gradient(#000 0 0) content-box,
    linear-gradient(#000 0 0);
}

/* Soft glow */
.lrr2MetaCard::after {
  content: "";
  position: absolute;
  width: 520px;
  height: 280px;
  left: -260px;
  top: -190px;
  background: radial-gradient(circle, rgba(161, 24, 30, 0.14), transparent 60%);
  pointer-events: none;
}

.lrr2MetaGrid { display: grid; gap: 12px; position: relative; z-index: 1; }
.lrr2MetaRow { display: flex; flex-wrap: wrap; gap: 10px; align-items: center; }

.lrr2MetaTag {
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--surface) 88%, transparent);
  color: var(--ink);
  border-radius: 999px;
  padding: 10px 12px;
  font-weight: 750;
  font-size: 13px;
  line-height: 1;
  display: inline-flex;
  align-items: center;
  gap: 10px;
  max-width: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  transition: transform .12s ease, background .12s ease, border-color .12s ease;
}
.lrr2MetaTag:hover {
  transform: translateY(-1px);
  background: color-mix(in srgb, var(--surface) 96%, transparent);
  border-color: color-mix(in srgb, var(--border) 70%, rgba(161, 24, 30, 0.18));
}
.lrr2MetaIcon svg { width: 18px; height: 18px; opacity: 0.9; }

.lrr2MetaAction {
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--surface) 86%, transparent);
  color: var(--ink);
  border-radius: 999px;
  padding: 10px 12px;
  cursor: pointer;
  font-weight: 800;
  font-size: 13px;
  line-height: 1;
  transition: transform .12s ease, background .12s ease, border-color .12s ease;
}
.lrr2MetaAction:hover {
  transform: translateY(-1px);
  background: color-mix(in srgb, var(--surface) 96%, transparent);
  border-color: color-mix(in srgb, var(--border) 70%, rgba(161, 24, 30, 0.18));
}

.lrr2MetaHint { display: inline-block; color: var(--muted); font-weight: 650; font-size: 12px; }

.lrr2Wrap[data-theme="dark"] .lrr2MetaTag,
.lrr2Wrap[data-theme="dark"] .lrr2MetaAction {
  background: color-mix(in srgb, rgba(15, 23, 42, 0.72) 80%, transparent);
}

/* =========================================================
   7) Tabs
========================================================= */
.lrr2Tabs {
  margin-top: 12px;
  padding: 6px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: var(--surface);
  box-shadow: var(--shadow);

  display: flex;
  align-items: center;
  justify-content: flex-start;
  gap: 6px;
  flex-wrap: wrap;
}

.lrr2Tab {
  border: 0;
  background: transparent;
  color: var(--ink);
  border-radius: 999px;
  padding: 10px 14px;
  cursor: pointer;
  font-weight: 800;

  display: inline-flex;
  align-items: center;
  gap: 10px;
  transition: background .12s ease, transform .12s ease;
}
.lrr2Tab:hover { background: rgba(15, 23, 42, 0.05); transform: translateY(-1px); }
.lrr2Tab.isActive {
  background: rgba(161, 24, 30, 0.10);
  box-shadow: inset 0 0 0 1px rgba(161, 24, 30, 0.18);
}
.lrr2Tab.isDisabled { opacity: .55; cursor: not-allowed; }

.lrr2TabBadge {
  font-size: 11px;
  font-weight: 900;
  padding: 4px 8px;
  border-radius: 999px;
  background: rgba(161, 24, 30, 0.14);
  color: var(--la-red);
  border: 1px solid rgba(161, 24, 30, 0.18);
}
.lrr2TabBadge.lock {
  margin-left: 10px;
  background: rgba(112,40,64,.12);
  color: #702840;
  border: 1px solid rgba(112,40,64,.22);
}

/* =========================================================
   8) Content + buttons
========================================================= */
.lrr2Content { margin-top: 14px; }
.lrr2Empty { padding: 14px; color: var(--muted); font-weight: 650; }

/* Base buttons used by gating panels */
.lrr2Btn {
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--surface) 86%, transparent);
  color: var(--ink);
  padding: 10px 14px;
  border-radius: 12px;
  cursor: pointer;
  font-weight: 800;
  transition: transform .12s ease, background .12s ease, border-color .12s ease, box-shadow .12s ease;
}
.lrr2Btn:hover {
  transform: translateY(-1px);
  background: color-mix(in srgb, var(--surface) 96%, transparent);
  border-color: color-mix(in srgb, var(--border) 70%, rgba(161, 24, 30, 0.18));
}
.lrr2Btn.primary {
  background: linear-gradient(135deg, var(--la-red), var(--la-red2));
  color: #fff;
  border-color: rgba(161, 24, 30, 0.25);
}
.lrr2Btn.primary:hover { filter: brightness(1.03); }
.lrr2Btn.ghost {
  background: color-mix(in srgb, var(--surface) 86%, transparent);
  color: var(--ink);
  border-color: var(--border);
}
.lrr2Btn:disabled { opacity: 0.6; cursor: not-allowed; transform: none; }

/* Premium glass buttons inside lock/gate cards only */
.lrr2LockHero .lrr2Btn,
.lrr2GateMidCard .lrr2Btn,
.lrr2GateCard .lrr2Btn {
  border-radius: 14px;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}

/* =========================================================
   9) Transcript tools (reader bar)
========================================================= */
.lrr2TranscriptTools { padding: 14px; }

.lrr2ReaderBar {
  padding-top: 10px;
  border-top: 1px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  flex-wrap: wrap;
}
.lrr2ReaderCluster {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  align-items: center;
}

.lrr2IconBtn {
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--surface) 86%, transparent);
  color: var(--ink);
  border-radius: 999px;
  padding: 10px 12px;
  cursor: pointer;
  font-weight: 800;
  display: inline-flex;
  align-items: center;
  gap: 10px;
  transition: transform .12s ease, background .12s ease, border-color .12s ease;
}
.lrr2IconBtn:hover {
  transform: translateY(-1px);
  background: color-mix(in srgb, var(--surface) 96%, transparent);
  border-color: color-mix(in srgb, var(--border) 70%, rgba(161, 24, 30, 0.18));
}
.lrr2IconBtn.isOn {
  background: rgba(14, 165, 165, 0.10);
  border-color: rgba(14, 165, 165, 0.22);
}
.lrr2IconBtnText { font-weight: 900; font-size: 12px; opacity: 0.9; }

/* =========================================================
   10) Collapsible transcript body + formatting
========================================================= */
.lrr2Collapse {
  margin-top: 12px;
  background: var(--pageBg);
  color: var(--pageInk);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 16px;
  transition: max-height .18s ease, opacity .18s ease;
}
.lrr2Collapse.closed {
  max-height: 0;
  opacity: 0;
  overflow: hidden;
  padding: 0;
  border: 0;
  box-shadow: none;
}
.lrr2Collapse.open { max-height: 100000px; opacity: 1; }

.lrr2FontSerif { font-family: ui-serif, Georgia, "Times New Roman", Times, serif; }
.lrr2FontSans { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; }

/* font scale helpers (JSX creates lrr2Fs-90..120) */
.lrr2Fs-90 { font-size: 0.90em; }  .lrr2Fs-91 { font-size: 0.91em; }
.lrr2Fs-92 { font-size: 0.92em; }  .lrr2Fs-93 { font-size: 0.93em; }
.lrr2Fs-94 { font-size: 0.94em; }  .lrr2Fs-95 { font-size: 0.95em; }
.lrr2Fs-96 { font-size: 0.96em; }  .lrr2Fs-97 { font-size: 0.97em; }
.lrr2Fs-98 { font-size: 0.98em; }  .lrr2Fs-99 { font-size: 0.99em; }
.lrr2Fs-100 { font-size: 1.00em; } .lrr2Fs-101 { font-size: 1.01em; }
.lrr2Fs-102 { font-size: 1.02em; } .lrr2Fs-103 { font-size: 1.03em; }
.lrr2Fs-104 { font-size: 1.04em; } .lrr2Fs-105 { font-size: 1.05em; }
.lrr2Fs-106 { font-size: 1.06em; } .lrr2Fs-107 { font-size: 1.07em; }
.lrr2Fs-108 { font-size: 1.08em; } .lrr2Fs-109 { font-size: 1.09em; }
.lrr2Fs-110 { font-size: 1.10em; } .lrr2Fs-111 { font-size: 1.11em; }
.lrr2Fs-112 { font-size: 1.12em; } .lrr2Fs-113 { font-size: 1.13em; }
.lrr2Fs-114 { font-size: 1.14em; } .lrr2Fs-115 { font-size: 1.15em; }
.lrr2Fs-116 { font-size: 1.16em; } .lrr2Fs-117 { font-size: 1.17em; }
.lrr2Fs-118 { font-size: 1.18em; } .lrr2Fs-119 { font-size: 1.19em; }
.lrr2Fs-120 { font-size: 1.20em; }

/* Transcript formatting */
.lrr2CaseFmt { line-height: 1.8; max-width: 78ch; margin: 0 auto; }
.lrr2CaseH { margin: 18px 0 8px; font-weight: 950; letter-spacing: -0.01em; }
.lrr2CaseP { margin: 10px 0; font-weight: 450; }

/* HTML mode (optional) */
.lrr2Html { line-height: 1.75; }
.lrr2Html :where(h2){ font-size:18px; font-weight:900; margin:14px 0 8px; }
.lrr2Html :where(h3){ font-size:16px; font-weight:900; margin:12px 0 6px; }
.lrr2Html :where(h4){ font-size:14px; font-weight:900; margin:10px 0 6px; }
.lrr2Html :where(p){ margin: 8px 0; line-height:1.7; font-weight: 450; }
.lrr2Html :where(blockquote){
  border-left:4px solid rgba(148,163,184,.5);
  padding-left:12px;
  margin:10px 0;
}
.lrr2Html :where(table){ width:100%; border-collapse:collapse; margin:10px 0; }
.lrr2Html :where(th, td){
  border:1px solid rgba(148,163,184,.5);
  padding:8px;
  vertical-align:top;
}
.lrr2Html :where(ul,ol){ padding-left:20px; }
.lrr2Html :where(li){ font-weight: 450; }
.lrr2Html :where(a){ text-decoration:underline; }

/* =========================================================
   11) Panels
========================================================= */
.lrr2Panel { padding: 14px; }
.lrr2Panel--tight { padding: 14px; }

.lrr2PanelHead {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 12px;
  flex-wrap: wrap;
}
.lrr2PanelHeadLeft { min-width: 260px; }
.lrr2PanelTitle { font-weight: 950; letter-spacing: -0.01em; }
.lrr2PanelSub { margin-top: 4px; font-size: 13px; color: var(--muted); font-weight: 650; }
.lrr2PanelEmpty { margin-top: 10px; color: var(--muted); font-weight: 650; }

/* =========================================================
   12) Access chip + subscription guide panel
========================================================= */
.lrr2AccessChip{
  display:inline-flex;
  align-items:center;
  gap:.45rem;
  padding:.3rem .6rem;
  border-radius:999px;
  border:1px solid rgba(17,24,39,.12);
  background:rgba(255,255,255,.7);
  font-size:.82rem;
}
.lrr2AccessChip .dot{width:.55rem;height:.55rem;border-radius:999px;background:rgba(107,114,128,.8)}
.lrr2AccessChip.ok .dot{background:rgba(16,185,129,.9)}
.lrr2AccessChip.warn .dot{background:rgba(245,158,11,.95)}
.lrr2AccessChip .hint{
  margin-left:.2rem;
  display:inline-grid;
  place-items:center;
  width:1.1rem;height:1.1rem;
  border-radius:999px;
  background:rgba(17,24,39,.08);
  font-size:.75rem;
}

.lrr2SubGuide{
  margin:14px 0 18px;
  border:1px solid rgba(17,24,39,.12);
  background:rgba(255,255,255,.78);
  border-radius:16px;
  box-shadow:0 12px 28px rgba(0,0,0,.08);
  overflow:hidden;
}
.lrr2SubGuideTop{padding:14px 14px 0}
.lrr2SubGuideTitle{font-weight:800;font-size:1rem}
.lrr2SubGuideStatus{display:flex;gap:.6rem;align-items:center;margin-top:6px;flex-wrap:wrap}
.lrr2SubGuideReason{color:rgba(17,24,39,.65);font-size:.9rem}
.lrr2Pill{padding:.22rem .55rem;border-radius:999px;font-size:.82rem;border:1px solid rgba(17,24,39,.12)}
.lrr2Pill.ok{background:rgba(16,185,129,.10)}
.lrr2Pill.warn{background:rgba(245,158,11,.12)}
.lrr2SubGuideBody{padding:12px 14px 14px}
.lrr2SubGuideMsg{color:rgba(17,24,39,.88);margin-bottom:10px}
.lrr2SubGuideSteps{margin:0;padding-left:18px;color:rgba(17,24,39,.85)}
.lrr2SubGuideSteps li{margin:6px 0}
.lrr2SubGuideActions{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}

/* =========================================================
   13) Premium lock hero + AI locked inline
========================================================= */
.lrr2LockHero{
  display: flex;
  gap: 14px;
  padding: 16px;
  border-radius: 18px;
  border: 1px solid rgba(15,23,42,0.10);
  background: linear-gradient(90deg, rgba(112,40,64,.08), rgba(2,132,199,.06));
  box-shadow: 0 10px 26px rgba(2,6,23,.06);
  margin: 14px 0 14px;
}
.lrr2LockHeroIcon{
  width: 44px;height: 44px;border-radius: 14px;
  display:flex;align-items:center;justify-content:center;
  background: rgba(255,255,255,.78);
  border: 1px solid rgba(15,23,42,0.08);
  font-size: 20px;
}
.lrr2LockHeroBody { min-width: 0; }
.lrr2LockHeroTitle{ font-weight: 800; color: rgba(15,23,42,.92); margin-bottom: 4px; }
.lrr2LockHeroMsg{ color: rgba(15,23,42,.72); font-size: 13.5px; line-height: 1.35; }
.lrr2LockHeroReason{ margin-top: 6px; color: rgba(15,23,42,.78); font-weight: 600; }
.lrr2LockHeroBenefits{ margin: 10px 0 0; padding-left: 18px; color: rgba(15,23,42,.78); font-size: 13px; }
.lrr2LockHeroActions{ margin-top: 12px; display:flex; gap: 10px; flex-wrap: wrap; }

.lrr2LockInline{
  display:flex;
  gap: 12px;
  align-items: center;
  padding: 14px;
  border-radius: 16px;
  border: 1px solid rgba(15,23,42,0.10);
  background: rgba(255,255,255,0.75);
}
.lrr2LockInlineIcon{
  width: 42px;height: 42px;border-radius: 14px;
  display:flex;align-items:center;justify-content:center;
  background: rgba(112,40,64,.10);
  border: 1px solid rgba(112,40,64,.18);
}
.lrr2LockInlineText { min-width: 0; }
.lrr2LockInlineTitle{ font-weight: 800; color: rgba(15,23,42,.92); }
.lrr2LockInlineMsg{ margin-top: 2px; color: rgba(15,23,42,.70); font-size: 13px; }
.lrr2LockInlineActions{ margin-left: auto; }

/* =========================================================
   14) Preview gate fade + sticky subscribe card
========================================================= */
.lrr2Collapse.isPreviewGated { position: relative; }

/* fade at end of preview */
.lrr2Collapse.isPreviewGated::after {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  height: 110px;
  pointer-events: none;
  background: linear-gradient(to bottom, rgba(255, 255, 255, 0), rgba(255, 255, 255, 1));
}
.lrr2Wrap[data-theme="sepia"] .lrr2Collapse.isPreviewGated::after {
  background: linear-gradient(to bottom, rgba(249, 243, 230, 0), rgba(249, 243, 230, 1));
}
.lrr2Wrap[data-theme="dark"] .lrr2Collapse.isPreviewGated::after {
  background: linear-gradient(to bottom, rgba(12, 14, 18, 0), rgba(12, 14, 18, 1));
}

.lrr2GateSticky {
  position: sticky;
  bottom: 12px;
  z-index: 60;
  margin-top: -12px;
}

.lrr2GateFade { height: 70px; border-radius: 14px; pointer-events: none; }
.lrr2Wrap[data-theme="paper"] .lrr2GateFade { background: linear-gradient(to top, rgba(255, 255, 255, 1), rgba(255, 255, 255, 0)); }
.lrr2Wrap[data-theme="sepia"] .lrr2GateFade { background: linear-gradient(to top, rgba(249, 243, 230, 1), rgba(249, 243, 230, 0)); }
.lrr2Wrap[data-theme="dark"] .lrr2GateFade { background: linear-gradient(to top, rgba(12, 14, 18, 1), rgba(12, 14, 18, 0)); }

.lrr2GateCard {
  display: flex;
  gap: 12px;
  align-items: center;
  justify-content: space-between;
  border-radius: 14px;
  border: 1px solid rgba(15, 23, 42, 0.12);
  padding: 12px;
  box-shadow: 0 10px 28px rgba(15, 23, 42, 0.14);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
}
.lrr2Wrap[data-theme="paper"] .lrr2GateCard { background: rgba(255, 255, 255, 0.96); }
.lrr2Wrap[data-theme="sepia"] .lrr2GateCard { background: rgba(249, 243, 230, 0.96); }
.lrr2Wrap[data-theme="dark"] .lrr2GateCard {
  background: rgba(12, 14, 18, 0.92);
  border-color: rgba(148, 163, 184, 0.22);
  box-shadow: 0 10px 28px rgba(0, 0, 0, 0.35);
}

.lrr2GateLeft { min-width: 0; }
.lrr2GateTitle { font-weight: 900; font-size: 14px; }
.lrr2GateMsg { margin-top: 3px; font-size: 13px; opacity: 0.78; }
.lrr2GateActions { display: flex; gap: 8px; flex-shrink: 0; }

@media (max-width: 520px) {
  .lrr2GateCard { flex-direction: column; align-items: stretch; }
  .lrr2GateActions { width: 100%; }
  .lrr2GateActions .lrr2Btn { width: 100%; }
}

/* =========================================================
   15) Split layout (Transcript + AI) + optional mode toggles
========================================================= */
.lrr2ModeBar {
  margin-top: 10px;
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 10px;
  flex-wrap: wrap;
}
.lrr2ModeGroup {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 6px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--surface) 82%, transparent);
  box-shadow: 0 10px 26px rgba(2, 6, 23, 0.06);
}
.lrr2ModeBtn {
  border: 0;
  background: transparent;
  color: var(--ink);
  border-radius: 999px;
  height: 36px;
  padding: 0 12px;
  cursor: pointer;
  font-weight: 900;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  transition: background .12s ease, transform .12s ease;
}
.lrr2ModeBtn:hover { background: rgba(15, 23, 42, 0.05); transform: translateY(-1px); }
.lrr2ModeBtn.isOn {
  background: rgba(161, 24, 30, 0.12);
  box-shadow: inset 0 0 0 1px rgba(161, 24, 30, 0.18);
}
.lrr2ModeBtn svg { width: 16px; height: 16px; opacity: 0.95; }

/* canonical split container */
.lrr2Split {
  display: grid;
  grid-template-columns: minmax(0, 1fr) 380px;
  gap: 14px;
  align-items: start;
}
.lrr2Article { min-width: 0; }
.lrr2Aside {
  position: sticky;
  top: 114px; /* canonical */
  align-self: start;
  min-width: 0;
}

.lrr2Split.isSingle { grid-template-columns: 1fr; }
.lrr2Split.isAiOnly .lrr2Article { display: none; }
.lrr2Split.isTranscriptOnly .lrr2Aside { display: none; }

@media (max-width: 980px) {
  .lrr2Split { grid-template-columns: 1fr; }
  .lrr2Aside { position: static; top: auto; }
}

/* =========================================================
   16) Inline mid-gate break (inside transcript)
========================================================= */
.lrr2GateMidBreak { margin: 18px auto 8px; max-width: 78ch; }
.lrr2GateMidRule {
  height: 1px;
  background: color-mix(in srgb, var(--border) 60%, transparent);
  margin: 12px 0;
}
.lrr2GateMidCard{
  border:1px solid rgba(15,23,42,.10);
  background: color-mix(in srgb, var(--surface) 88%, transparent);
  border-radius: 18px;
  box-shadow: 0 14px 34px rgba(2,6,23,.08);
  overflow:hidden;
}
.lrr2GateMidTop{ display:flex; gap:12px; padding: 14px; align-items:flex-start; }
.lrr2GateMidLock{
  width: 44px;height:44px;border-radius: 14px;
  display:grid;place-items:center;
  border:1px solid rgba(112,40,64,.18);
  background: rgba(112,40,64,.10);
  font-size: 20px;
}
.lrr2GateMidText{min-width:0;}
.lrr2GateMidTitle{font-weight: 950; letter-spacing: -0.01em;}
.lrr2GateMidMsg{margin-top:4px; color: var(--muted); font-weight: 650; font-size: 13px; line-height:1.45;}
.lrr2GateMidReason{margin-top:8px; font-weight:700; color: color-mix(in srgb, var(--ink) 78%, transparent);}
.lrr2GateMidBullets{
  margin: 10px 0 0;
  padding-left: 18px;
  color: color-mix(in srgb, var(--ink) 78%, transparent);
  font-size: 13px;
}
.lrr2GateMidActions{ display:flex; gap:10px; flex-wrap: wrap; margin-top: 12px; }

/* =========================================================
   17) LegalAI UI (lrrAi*)
========================================================= */
.lrrAi{
  background: var(--ai-surface);
  border: 1px solid var(--ai-border);
  border-radius: var(--ai-radius);
  box-shadow: var(--ai-shadow);
  overflow: hidden;
}
.lrrAi.isCompact{ box-shadow: var(--shadow2); }

.lrrAiHead{
  padding: 14px 14px 10px;
  display:flex;
  gap: 12px;
  align-items:flex-start;
  justify-content: space-between;
  border-bottom: 1px solid color-mix(in srgb, var(--border) 60%, transparent);
  background:
    radial-gradient(800px 220px at 15% 0%, rgba(161,24,30,0.12), transparent 55%),
    radial-gradient(700px 220px at 100% 0%, rgba(14,165,165,0.10), transparent 55%);
}

.lrrAiHeadLeft{min-width: 0;}
.lrrAiTitle{
  font-weight: 900;
  letter-spacing: -0.01em;
  font-size: 15px;
}
.lrrAiSub{
  margin-top: 4px;
  color: var(--muted);
  font-weight: 650;
  font-size: 12px;
  line-height: 1.35;
  max-width: 46ch;
}

/* keep one-row header actions */
.lrrAiHeadRight,
.lrrAiHeadActions {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  flex-wrap: nowrap;
  white-space: nowrap;
}
.lrrAiHeadSep {
  width: 1px;
  height: 18px;
  background: color-mix(in srgb, var(--border) 70%, transparent);
  margin: 0 2px;
}

/* canonical AI buttons (deduped) */
.lrrAiBtn,
.lrrAiIconBtn {
  height: 36px;
  padding: 0 12px;
  border-radius: 999px;
  font-weight: 850;
  font-size: 12px;
  letter-spacing: 0.1px;
  border: 1px solid color-mix(in srgb, var(--border) 70%, rgba(161,24,30,0.14));
  background: color-mix(in srgb, var(--surface) 74%, transparent);
  color: var(--ink);
  cursor: pointer;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  transition: transform .12s ease, background .12s ease, border-color .12s ease, box-shadow .12s ease;
}
.lrrAiBtn:hover,
.lrrAiIconBtn:hover {
  transform: translateY(-1px);
  background: color-mix(in srgb, var(--surface) 90%, transparent);
  border-color: color-mix(in srgb, var(--border) 60%, rgba(161,24,30,0.22));
  box-shadow: 0 12px 28px rgba(2,6,23,.10);
}
.lrrAiBtn.primary{
  background: linear-gradient(135deg, var(--la-red), var(--la-red2));
  color:#fff;
  border-color: rgba(161,24,30,0.30);
  box-shadow: 0 12px 28px rgba(161,24,30,.18);
}
.lrrAiBtn.ghost{ background: color-mix(in srgb, var(--surface) 68%, transparent); }
.lrrAiBtn:disabled,
.lrrAiIconBtn:disabled { opacity:.6; cursor:not-allowed; transform:none; }

.lrrAiIconBtn svg { width: 18px; height: 18px; opacity: .9; }

.lrrAiTabs{
  padding: 8px 10px;
  display:flex;
  gap: 6px;
  flex-wrap: wrap;
  border-bottom: 1px solid color-mix(in srgb, var(--border) 60%, transparent);
  background: color-mix(in srgb, var(--surface) 84%, transparent);
}
.lrrAiTab{
  border: 0;
  background: transparent;
  color: var(--ink);
  border-radius: 999px;
  padding: 8px 12px;
  cursor:pointer;
  font-weight: 900;
  font-size: 12px;
  transition: background .12s ease, transform .12s ease;
}
.lrrAiTab:hover{ background: rgba(15,23,42,0.05); transform: translateY(-1px); }
.lrrAiTab.isActive{
  background: rgba(161,24,30,0.10);
  box-shadow: inset 0 0 0 1px rgba(161,24,30,0.18);
}

.lrrAiChips{
  padding: 10px 12px;
  display:flex;
  gap: 8px;
  flex-wrap: wrap;
  border-bottom: 1px solid color-mix(in srgb, var(--border) 60%, transparent);
}
.lrrAiChip{
  border: 1px solid color-mix(in srgb, var(--border) 65%, rgba(14,165,165,0.16));
  background: color-mix(in srgb, var(--surface) 70%, transparent);
  color: color-mix(in srgb, var(--ink) 92%, transparent);
  border-radius: 999px;
  padding: 7px 10px;
  cursor: pointer;
  font-weight: 800;
  font-size: 12px;
  transition: transform .12s ease, background .12s ease, border-color .12s ease;
}
.lrrAiChip:hover{
  transform: translateY(-1px);
  background: color-mix(in srgb, var(--surface) 86%, transparent);
  border-color: color-mix(in srgb, var(--border) 55%, rgba(161,24,30,0.22));
}

.lrrAiBody{ padding: 12px; }

.lrrAiCard{
  background: color-mix(in srgb, var(--surface) 86%, transparent);
  border: 1px solid color-mix(in srgb, var(--border) 60%, transparent);
  border-radius: 18px;
  box-shadow: 0 14px 40px rgba(2,6,23,.08);
  overflow: hidden;
}

.lrrAiRow{
  padding: 12px;
  display:flex;
  gap: 10px;
  align-items:center;
  justify-content: space-between;
  flex-wrap: wrap;
  border-bottom: 1px solid color-mix(in srgb, var(--border) 60%, transparent);
}
.lrrAiNote{
  color: var(--muted);
  font-weight: 650;
  font-size: 12px;
  line-height: 1.35;
  max-width: 55ch;
}
.lrrAiRowActions{ display:flex; gap:8px; flex-wrap: wrap; justify-content:flex-end; }

.lrrAiLoading{
  padding: 14px 12px;
  display:flex;
  gap: 10px;
  align-items:center;
  color: var(--muted);
  font-weight: 750;
}
.lrrAiDots{ display:inline-flex; gap: 6px; }
.lrrAiDots span{
  width: 7px; height: 7px; border-radius: 999px;
  background: rgba(161,24,30,0.35);
  animation: lrrAiPulse 1.05s infinite ease-in-out;
}
.lrrAiDots span:nth-child(2){ animation-delay: .12s; }
.lrrAiDots span:nth-child(3){ animation-delay: .24s; }
@keyframes lrrAiPulse{
  0%, 100%{ transform: translateY(0); opacity: .55; }
  50%{ transform: translateY(-2px); opacity: 1; }
}

.lrrAiEmpty{ padding: 14px 12px; }
.lrrAiEmptyTitle{ font-weight: 900; letter-spacing: -0.01em; }
.lrrAiEmptyMsg{ margin-top: 4px; color: var(--muted); font-weight: 650; font-size: 12.5px; line-height: 1.45; }

.lrrAiAnswer{ padding: 12px; }
.lrrAiAnswerTop{
  display:flex;
  gap: 10px;
  align-items:center;
  justify-content: space-between;
  flex-wrap: wrap;
  margin-bottom: 10px;
}
.lrrAiAnswerMeta{ display:flex; gap: 8px; flex-wrap: wrap; }
.lrrAiAnswerMeta .pill{
  border:1px solid color-mix(in srgb, var(--border) 60%, transparent);
  background: color-mix(in srgb, var(--surface) 74%, transparent);
  border-radius: 999px;
  padding: 6px 10px;
  font-size: 12px;
  font-weight: 900;
}
.lrrAiAnswerMeta .pill.soft{ background: rgba(15,23,42,0.06); }
.lrrAiAnswerActions{ display:flex; gap: 8px; flex-wrap: wrap; justify-content:flex-end; }

/* Chat */
.lrrAiChat{
  padding: 12px;
  max-height: 48vh;
  overflow-y: auto;
}
.lrrAiChat::-webkit-scrollbar{ width: 10px; }
.lrrAiChat::-webkit-scrollbar-thumb{
  background: color-mix(in srgb, var(--border) 70%, transparent);
  border-radius: 999px;
  border: 2px solid transparent;
  background-clip: content-box;
}
/* Chat bubble typography polish */
.lrrAiChat--premium .bubble {
  line-height: 1.55;
}

.lrrAiChat--premium .lrrAiFmt {
  font-size: 14px;
}

.lrrAiChat--premium .lrrAiP {
  margin: 0.35rem 0;
  color: var(--reader-ink, #111827);
}

.lrrAiChat--premium .lrrAiH {
  margin: 0.5rem 0 0.25rem;
  font-weight: 800;
  letter-spacing: 0.2px;
}

.lrrAiChat--premium .lrrAiH-2 { font-size: 15px; }
.lrrAiChat--premium .lrrAiH-3 { font-size: 14px; }
.lrrAiChat--premium .lrrAiH-4 { font-size: 13px; opacity: 0.95; }

.lrrAiChat--premium .lrrAiList {
  margin: 0.35rem 0 0.55rem;
  padding-left: 1.1rem;
}

.lrrAiChat--premium .lrrAiList.bullets li {
  margin: 0.25rem 0;
}

.lrrAiChat--premium .lrrAiSpacer {
  height: 0.5rem;
}

.lrrAiMsg{ display:flex; margin: 10px 0; }
.lrrAiMsg.user{ justify-content: flex-end; }
.lrrAiMsg.assistant{ justify-content: flex-start; }

.lrrAiMsg .bubble{
  max-width: 92%;
  padding: 10px 12px;
  border-radius: 16px;
  border: 1px solid color-mix(in srgb, var(--border) 65%, transparent);
  background: color-mix(in srgb, var(--surface) 82%, transparent);
  box-shadow: 0 10px 22px rgba(2,6,23,.06);
  line-height: 1.6;
}
.lrrAiMsg.user .bubble{
  background: linear-gradient(135deg, rgba(161,24,30,0.14), rgba(112,40,64,0.10));
  border-color: rgba(161,24,30,0.18);
}

.lrrAiTyping{
  display:inline-flex;
  gap: 6px;
  padding: 6px 2px;
}
.lrrAiTyping span{
  width: 7px; height: 7px; border-radius: 999px;
  background: rgba(14,165,165,0.45);
  animation: lrrAiPulse 1.05s infinite ease-in-out;
}
.lrrAiTyping span:nth-child(2){ animation-delay: .12s; }
.lrrAiTyping span:nth-child(3){ animation-delay: .24s; }

.lrrAiComposer{
  border-top: 1px solid color-mix(in srgb, var(--border) 60%, transparent);
  background: color-mix(in srgb, var(--surface) 88%, transparent);
  padding: 10px;
}
.lrrAiInput{
  width: 100%;
  min-height: 74px;
  resize: vertical;
  border: 1px solid color-mix(in srgb, var(--border) 70%, transparent);
  border-radius: 14px;
  padding: 10px 12px;
  font-weight: 650;
  color: var(--ink);
  background: color-mix(in srgb, var(--surface) 82%, transparent);
  outline: none;
}
.lrrAiInput:focus{
  border-color: var(--focusBorder);
  box-shadow: var(--focusRing);
  background: color-mix(in srgb, var(--surface) 94%, transparent);
}
.lrrAiComposerActions{
  margin-top: 10px;
  display:flex;
  gap: 10px;
  align-items:center;
  justify-content: space-between;
  flex-wrap: wrap;
}
.lrrAiHint{ color: var(--muted); font-weight: 650; font-size: 12px; }

/* Rich text inside AI bubbles */
.lrrAiFmt{ line-height: 1.65; }
.lrrAiSpacer{ height: 10px; }
.lrrAiH{ margin: 10px 0 6px; font-weight: 900; letter-spacing: -0.01em; }
.lrrAiH-2{ font-size: 14px; }
.lrrAiH-3{ font-size: 13px; }
.lrrAiH-4{ font-size: 12.5px; opacity: .95; }
.lrrAiP{ margin: 8px 0; font-weight: 450; }
.lrrAiList{ margin: 8px 0; padding-left: 18px; }
.lrrAiList li{ margin: 6px 0; font-weight: 450; }
.lrrAiList.ordered{ padding-left: 20px; }

/* Sections (canonical: 1 col default, 2 col on wide desktop) */
.lrrAiSections {
  display: grid;
  gap: 12px;
  grid-template-columns: 1fr;
  margin-top: 10px;
}
@media (min-width: 980px) {
  .lrrAiSections { grid-template-columns: 1fr 1fr; }
}
.lrrAiSectionCard{
  border-radius: 16px;
  background: rgba(255, 255, 255, 0.72);
  border: 1px solid rgba(17, 24, 39, 0.10);
  box-shadow: 0 12px 30px rgba(0, 0, 0, 0.06);
  overflow: hidden;
  transition: transform 140ms ease, box-shadow 140ms ease, border-color 140ms ease;
}
.lrrAiSectionCard:hover{
  transform: translateY(-1px);
  border-color: rgba(17, 24, 39, 0.14);
  box-shadow: 0 18px 44px rgba(0, 0, 0, 0.08);
}
.lrrAiSectionHead{
  display:flex;
  align-items:center;
  gap:10px;
  padding:12px 14px;
  background: linear-gradient(90deg, rgba(112,40,64,.08), rgba(14,165,165,.06));
  border-bottom: 1px solid rgba(17, 24, 39, 0.08);
}
.lrrAiSectionHead .dot{
  width: 9px;
  height: 9px;
  border-radius: 99px;
  background: rgba(161, 18, 18, 0.85);
  box-shadow: 0 0 0 4px rgba(161, 18, 18, 0.12);
}
.lrrAiSectionHead .ttl{
  font-size: 12px;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  font-weight: 900;
  color: rgba(17, 24, 39, 0.88);
}
.lrrAiSectionList{
  margin: 0;
  padding: 12px 18px 14px;
  list-style: disc;
}
.lrrAiSectionList li{
  margin: 8px 0;
  line-height: 1.55;
  color: rgba(17, 24, 39, 0.88);
  font-weight: 450;
}

/* Takeaways (canonical) */
.lrrAiTakeaways{
  margin-top: 14px;
  border-radius: 16px;
  background: rgba(255, 255, 255, 0.72);
  border: 1px solid rgba(17, 24, 39, 0.10);
  box-shadow: 0 12px 30px rgba(0, 0, 0, 0.06);
  overflow: hidden;
}
.lrrAiTakeawaysSum{
  cursor:pointer;
  list-style:none;
  display:flex;
  align-items:center;
  gap:10px;
  padding:12px 14px;
  user-select:none;
  border-bottom: 1px solid rgba(17, 24, 39, 0.08);
}
.lrrAiTakeawaysSum::-webkit-details-marker{ display:none; }
.lrrAiTakeawaysSum .kpttl{ font-weight: 900; letter-spacing: .06em; font-size: 12px; }
.lrrAiTakeawaysSum .kphint{ color: rgba(17,24,39,.55); font-size:12px; font-weight:700; }
.lrrAiTakeawaysSum .chev{ margin-left:auto; opacity:.7; }

.lrrAiKpGrid{
  padding: 14px;
  display:grid;
  gap: 12px;
  grid-template-columns: 1fr;
}
.lrrAiKpCard{
  display:flex;               /* ✅ badge never overlaps */
  align-items:flex-start;
  gap: 10px;
  border-radius: 14px;
  background: rgba(255, 255, 255, 0.78);
  border: 1px solid rgba(17, 24, 39, 0.10);
  box-shadow: 0 10px 22px rgba(0,0,0,0.05);
  padding: 12px 12px 10px;
}
.lrrAiKpText{
  flex: 1;
  min-width: 0;
  font-weight: 400;
  line-height: 1.55;
  color: rgba(17, 24, 39, 0.88);
}
.lrrAiKpBadge{
  flex: 0 0 auto;
  border-radius: 999px;
  padding: 6px 10px;
  font-weight: 900;
  font-size: 12px;
  border: 1px solid rgba(112,40,64,.22);
  background: rgba(112,40,64,.10);
  color: rgba(112,40,64,.92);
}

/* AI footer (optional) */
.lrrAiFooter{
  margin-top: 12px;
  padding-top: 10px;
  border-top: 1px solid rgba(15,23,42,.10);
  color: rgba(15,23,42,.68);
  font-size: 12.5px;
  font-weight: 650;
  display:grid;
  gap:6px;
}

/* =========================================================
   18) Focus + hover safety
========================================================= */
.lrr2Wrap :where(button, [role="button"], input, textarea):focus-visible {
  outline: none;
  box-shadow: var(--focusRing);
  border-color: var(--focusBorder);
}
@media (hover: none) {
  .lrr2Wrap :where(.lrr2Btn, .lrr2IconBtn, .lrr2LinkBtn, .lrrAiBtn, .lrrAiChip):hover {
    transform: none !important;
  }
}

/* =========================================================
   19) Dark theme adjustments (AI)
========================================================= */
.lrr2Wrap[data-theme="dark"] .lrrAi,
.lrr2Wrap[data-theme="dark"] .lrrAiCard,
.lrr2Wrap[data-theme="dark"] .lrrAiComposer,
.lrr2Wrap[data-theme="dark"] .lrrAiTabs {
  background: rgba(15, 23, 42, 0.62);
  border-color: rgba(148, 163, 184, 0.22);
}
.lrr2Wrap[data-theme="dark"] .lrrAiSub,
.lrr2Wrap[data-theme="dark"] .lrrAiHint {
  color: rgba(148, 163, 184, 0.78);
}
.lrr2Wrap[data-theme="dark"] .lrrAiBtn,
.lrr2Wrap[data-theme="dark"] .lrrAiIconBtn,
.lrr2Wrap[data-theme="dark"] .lrrAiChip {
  background: rgba(2, 6, 23, 0.42);
  border-color: rgba(148, 163, 184, 0.22);
  color: rgba(226, 232, 240, 0.92);
}
.lrr2Wrap[data-theme="dark"] .lrrAiSectionCard,
.lrr2Wrap[data-theme="dark"] .lrrAiTakeaways {
  background: rgba(15, 23, 42, 0.62);
  border-color: rgba(148, 163, 184, 0.18);
}
.lrr2Wrap[data-theme="dark"] .lrrAiSectionHead {
  border-bottom-color: rgba(148,163,184,0.18);
}

/* =========================================================
   20) Mobile tweaks
========================================================= */
@media (max-width: 640px) {
  .lrr2Wrap { padding: 14px 12px 40px; }
  .lrr2Brand { font-size: 16px; }
  .lrr2SearchInput { min-width: 0; width: 100%; }
  .lrr2SearchBtn { width: 100%; }
  .lrr2SearchItemRight { max-width: 100%; justify-content: flex-start; }
  .lrr2MetaCard { padding: 14px; }
  .lrrAiChat { max-height: 46vh; }
}
/* =========================================================
   LegalAI Summary – Sectioned Cards (FACTS/ISSUES/HOLDING…)
   Paste at bottom of lawReportReader.css to override
========================================================= */

.lrrAiCaseLayout {
  padding: 2px 2px 10px;
}

.lrrAiCaseTitle {
  font-weight: 900;
  letter-spacing: -0.01em;
  font-size: 14px;
  color: rgba(17, 24, 39, 0.92);
  margin: 8px 2px 12px;
}

.lrrAiStack {
  display: grid;
  grid-template-columns: 1fr;
  gap: 12px;
}

/* Card */
.lrrAiSCard {
  position: relative;
  border-radius: 16px;
  border: 1px solid rgba(17, 24, 39, 0.10);
  background: rgba(255, 255, 255, 0.82);
  box-shadow: 0 10px 26px rgba(0, 0, 0, 0.05);
  overflow: hidden;
}

/* Left colored rail */
.lrrAiSCard::before {
  content: "";
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 4px;
  background: rgba(14, 165, 165, 0.9); /* default (facts-like) */
}

/* Header row with pill */
.lrrAiSHead {
  padding: 10px 12px 8px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.lrrAiSPill {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  border-radius: 999px;
  font-size: 11px;
  font-weight: 950;
  letter-spacing: 0.08em;
  text-transform: uppercase;

  border: 1px solid rgba(17, 24, 39, 0.10);
  background: rgba(255, 255, 255, 0.88);
  color: rgba(17, 24, 39, 0.82);
}

/* Bullets like your screenshot */
.lrrAiSBullets {
  margin: 0;
  padding: 0 16px 14px 34px;
  line-height: 1.55;
}
.lrrAiSBullets li {
  margin: 8px 0;
  color: rgba(17, 24, 39, 0.88);
  font-weight: 450;
}

/* Tone mapping (rail + subtle background) */
.lrrAiTone-facts::before { background: rgba(14, 165, 165, 0.9); }
.lrrAiTone-facts { background: rgba(255, 255, 255, 0.82); }

.lrrAiTone-issues::before { background: rgba(161, 24, 30, 0.85); }
.lrrAiTone-issues { background: rgba(255, 255, 255, 0.82); }

.lrrAiTone-holding::before { background: rgba(112, 40, 64, 0.88); }
.lrrAiTone-holding { background: rgba(255, 248, 248, 0.55); }

.lrrAiTone-reasoning::before { background: rgba(79, 70, 229, 0.75); }
.lrrAiTone-reasoning { background: rgba(249, 250, 255, 0.65); }

.lrrAiTone-orders::before { background: rgba(245, 158, 11, 0.85); }
.lrrAiTone-orders { background: rgba(255, 251, 235, 0.70); }

.lrrAiTone-rule::before { background: rgba(16, 185, 129, 0.85); }
.lrrAiTone-rule { background: rgba(236, 253, 245, 0.70); }

.lrrAiTone-authorities::before { background: rgba(100, 116, 139, 0.9); }
.lrrAiTone-authorities { background: rgba(248, 250, 252, 0.75); }

.lrrAiTone-summary::before { background: rgba(148, 163, 184, 0.9); }

/* Dark theme compatibility */
.lrr2Wrap[data-theme="dark"] .lrrAiSCard {
  background: rgba(15, 23, 42, 0.62);
  border-color: rgba(148, 163, 184, 0.18);
}
.lrr2Wrap[data-theme="dark"] .lrrAiSPill {
  background: rgba(2, 6, 23, 0.40);
  border-color: rgba(148, 163, 184, 0.18);
  color: rgba(226, 232, 240, 0.92);
}
.lrr2Wrap[data-theme="dark"] .lrrAiSBullets li,
.lrr2Wrap[data-theme="dark"] .lrrAiCaseTitle {
  color: rgba(226, 232, 240, 0.92);
}
.lrrAiSegment {
  display: inline-flex;
  gap: 8px;
  padding: 6px;
  border: 1px solid rgba(17, 24, 39, 0.12);
  border-radius: 999px;
  background: rgba(255,255,255,.6);
  backdrop-filter: blur(10px);
}

.lrrAiSegBtn {
  padding: 8px 12px;
  border-radius: 999px;
  font-weight: 700;
  background: transparent;
  border: 1px solid transparent;
}

.lrrAiSegBtn.isOn {
  background: rgba(17, 24, 39, 0.92);
  color: #fff;
}
/* Header row should not wrap into a messy two-line overlap */
.lrrAiHead {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  flex-wrap: nowrap;
}

.lrrAiHeadLeft {
  min-width: 0;
}

.lrrAiHeadRight {
  display: flex;
  align-items: center;
  gap: 8px;
  flex: 0 0 auto;
  flex-wrap: nowrap;
}

/* Compact mode: hide subtitle + make actions icon-like */
.lrrAi.isCompact .lrrAiSub {
  display: none;
}

.lrrAi.isCompact .lrrAiHeadActions {
  gap: 6px;
}
.lrrAiIconBtn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  border: 1px solid rgba(17, 24, 39, 0.12);
  background: rgba(255,255,255,0.75);
  padding: 8px 10px;
  border-radius: 999px;
  cursor: pointer;
  font-weight: 700;
}

.lrrAiIconBtn svg {
  width: 18px;
  height: 18px;
}

.lrrAiIconBtn:disabled {
  opacity: 0.55;
  cursor: not-allowed;
}

/* Compact (split aside) => icon-only */
.lrrAi.isCompact .lrrAiIconBtn .txt {
  display: none;
}

.lrrAi.isCompact .lrrAiIconBtn {
  padding: 8px;
}
